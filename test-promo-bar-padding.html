<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promo Bar Padding Test</title>
    <style>
        /* Promo Bar Styles */
        .promobarx-topbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 999999;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 12px 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-size: 14px;
            line-height: 1.4;
            text-align: center;
            transition: all 0.3s ease;
            background: #2563eb;
            color: white;
        }
        
        .promobarx-content {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .promobarx-title {
            font-weight: 600;
        }
        
        .promobarx-cta {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s ease;
            white-space: nowrap;
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }
        
        .promobarx-cta:hover {
            transform: translateY(-1px);
            background: rgba(255, 255, 255, 0.3);
        }
        
        .promobarx-close {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 4px;
            transition: all 0.2s ease;
            opacity: 0.7;
            color: white;
        }
        
        .promobarx-close:hover {
            opacity: 1;
            background: rgba(255, 255, 255, 0.1);
        }
        
        /* Body padding when promo bar is active */
        body.promobarx-active {
            padding-top: var(--promobarx-height, 60px) !important;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .promobarx-content {
                flex-direction: column;
                gap: 10px;
            }
            
            .promobarx-topbar {
                padding: 10px 15px;
                font-size: 13px;
            }
        }
        
        /* Demo page styles */
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
        }
        
        .header {
            background: #1f2937;
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .content {
            padding: 40px 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .demo-section {
            background: #f3f4f6;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .toggle-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 0;
        }
        
        .toggle-button:hover {
            background: #2563eb;
        }
    </style>
</head>
<body class="promobarx-active">
    <!-- Promo Bar -->
    <div id="promobarx-topbar-1" class="promobarx-topbar">
        <div class="promobarx-content">
            <div class="promobarx-title">ðŸŽ‰ Special Offer: 50% Off Everything!</div>
            <a href="#" class="promobarx-cta">Shop Now</a>
        </div>
        <button class="promobarx-close" onclick="togglePromoBar()">Ã—</button>
    </div>
    
    <!-- Page Header -->
    <div class="header">
        <h1>Website Header</h1>
        <p>This header should be visible below the promo bar</p>
    </div>
    
    <!-- Page Content -->
    <div class="content">
        <h2>Demo Page Content</h2>
        <p>This page demonstrates how the promo bar padding solution works. The promo bar is positioned at the top of the page, and the body has padding-top added to prevent the header from being hidden.</p>
        
        <div class="demo-section">
            <h3>How it works:</h3>
            <ul>
                <li>The promo bar uses <code>position: fixed</code> with <code>top: 0</code></li>
                <li>When the promo bar is visible, JavaScript calculates its actual height</li>
                <li>The height is stored as a CSS custom property: <code>--promobarx-height</code></li>
                <li>The <code>body</code> gets the class <code>promobarx-active</code> with dynamic padding</li>
                <li>This creates a "fake height" that matches the exact promo bar height</li>
                <li>The padding automatically adjusts when the window is resized</li>
                <li>When the promo bar is closed, the class and custom property are removed</li>
            </ul>
        </div>
        
        <div class="demo-section">
            <h3>Test Controls:</h3>
            <button class="toggle-button" onclick="togglePromoBar()">Toggle Promo Bar</button>
            <button class="toggle-button" onclick="toggleBodyPadding()">Toggle Body Padding</button>
        </div>
        
        <div class="demo-section">
            <h3>Current Status:</h3>
            <p><strong>Promo Bar:</strong> <span id="promo-status">Visible</span></p>
            <p><strong>Body Padding:</strong> <span id="padding-status">Active (60px)</span></p>
        </div>
        
        <div class="demo-section">
            <h3>Lorem Ipsum Content</h3>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        </div>
    </div>
    
    <script>
        // Function to update promo bar height
        function updatePromoBarHeight() {
            const promoBar = document.querySelector('.promobarx-topbar');
            if (promoBar && document.body.classList.contains('promobarx-active')) {
                const promoBarHeight = promoBar.offsetHeight;
                document.documentElement.style.setProperty('--promobarx-height', promoBarHeight + 'px');
                updatePaddingStatus();
            }
        }
        
        // Initialize height on page load
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(updatePromoBarHeight, 100);
        });
        
        // Update height on window resize
        window.addEventListener('resize', updatePromoBarHeight);
        
        function togglePromoBar() {
            const promoBar = document.getElementById('promobarx-topbar-1');
            const promoStatus = document.getElementById('promo-status');
            
            if (promoBar.style.display === 'none') {
                promoBar.style.display = 'flex';
                document.body.classList.add('promobarx-active');
                // Update height after showing the promo bar
                setTimeout(updatePromoBarHeight, 10);
                promoStatus.textContent = 'Visible';
            } else {
                promoBar.style.transform = 'translateY(-100%)';
                setTimeout(() => {
                    promoBar.style.display = 'none';
                    promoBar.style.transform = '';
                    document.body.classList.remove('promobarx-active');
                    document.documentElement.style.removeProperty('--promobarx-height');
                    promoStatus.textContent = 'Hidden';
                    updatePaddingStatus();
                }, 300);
            }
        }
        
        function toggleBodyPadding() {
            const body = document.body;
            const paddingStatus = document.getElementById('padding-status');
            
            if (body.classList.contains('promobarx-active')) {
                body.classList.remove('promobarx-active');
                paddingStatus.textContent = 'Inactive (0px)';
            } else {
                body.classList.add('promobarx-active');
                updatePaddingStatus();
            }
        }
        
        function updatePaddingStatus() {
            const paddingStatus = document.getElementById('padding-status');
            const isActive = document.body.classList.contains('promobarx-active');
            const actualHeight = getComputedStyle(document.documentElement).getPropertyValue('--promobarx-height');
            const padding = isActive ? (actualHeight || '60px') : '0px';
            paddingStatus.textContent = isActive ? `Active (${padding})` : `Inactive (${padding})`;
        }
        
        // Initialize status
        updatePaddingStatus();
    </script>
</body>
</html>
